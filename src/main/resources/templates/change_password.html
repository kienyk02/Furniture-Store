<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="./assets/img/logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="/assets/css/base.css">
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="./assets/css/footer.css">
    <title>Change Password</title>
<style>
.changepassword-information{
    padding:50px 20px 10px ;
    width: 25%;
    margin-left: 130px;
}
.changepassword__info{
    padding-left: 10px;
}
.changepassword__heading{
    font-size: 25px;
    font-weight: 500;
    color: var(--primary-color);
    padding-bottom: 20px;
}
.changepassword__info-span{
    display: block;
    width: 100%;
    padding-left: 5px;
    background-color: var(--primary-color);
    color:white
}
.changepassword__info-input{
	width:100%;
	height:30px;
	outline:none;
	padding:0 5px;
}
.changepassword__edit{
    margin-top: 20px;
}
@media (max-width:500px){
	.changepassword-information{
	    padding:50px 0px 10px ;
	    width: 90%;
	    margin:0 auto;
	}
}
</style>
</head>
<body>
    <div class="app">
        <header th:replace="~{header.html :: header}"> </header>
        <div class="container">
            <div class="grid">
                <form action="/handle-changepassword" method="Post" class="changepassword-information">
	            	<div class="changepassword__heading">Đổi Mật Khẩu</div>
	            	<div class="changepassword__info">
	                    <span class="changepassword__info-span">Mật khẩu cũ</span>
	                    <input name="oldpassword" class="changepassword__info-input" type="password"/>
	                    <span class="changepassword__info-span">Mật khẩu mới</span>
	                    <input name="newpassword" class="changepassword__info-input" type="password"/>
	                    <p style="color:red" class="error-inputchangepw"></p>
	                    <span class="changepassword__info-span">Xác nhận mật khẩu mới</span>
	                    <input class="changepassword__info-input" type="password"/>
	                  	<p style="color:red" class="error-comfirmchangepw"></p>
	                    <p  id="errorchangepassword" style="color:red" th:if="${errorchangepassword}" ></p>
	                    <p  id="succeschangepassword" style="color:#4ac35a" th:if="${succeschangepassword}" ></p>
	            	</div>
	            	<div onclick="handleSubmitEditPasssword()" class="changepassword__edit btn btn--primary">
                            <i style="padding-right: 5px;" class="fa-solid fa-pen-to-square"></i>
                            Chỉnh sửa
                    </div>
                </form>
            </div>
        </div>
        <footer th:replace="~{footer.html :: footer}"> </footer>
    </div>
    <div class="contact-fixed">
        <ul type="none">
            <li> 
                <div class="color-mode ">
                    <div class="light-mode mode--active">
                        <i class="fa-solid fa-sun"></i>
                    </div>
                    <div class="dark-mode ">
                        <i class="fa-solid fa-moon"></i>
                    </div>
                </div>
            </li>
            <li> 
                <a target="_blank" href="https://www.facebook.com/profile.php?id=100013168653241"> 
                    <img src="https://cdn1.iconfinder.com/data/icons/logotypes/32/circle-facebook_-128.png" alt="">  
                </a> 
            </li>
            <li> 
                <a target="_blank" href="https://zalo.me/0961016881"> 
                    <img src="https://stc-zaloprofile.zdn.vn/pc/v1/images/zalo_sharelogo.png" alt="">  
                </a> 
            </li>
            <li> 
                <a target="_blank" href="https://www.youtube.com/channel/UCn5EIwdMcGC8JKgDP28xqIw"> 
                    <img src="https://cdn1.iconfinder.com/data/icons/logotypes/32/youtube-128.png" alt="">  
                </a> 
            </li>
            <li> 
                <a target="_blank" href="tel:0961016881"> 
                    <img src="https://cdn1.iconfinder.com/data/icons/basic-ui-elements-color/700/08_phone-128.png" alt="">  
                </a> 
            </li>
            <li class="pagination-item comeback_navbar">
                <a href="#" class="paginaiton-item__link">
                    <i class="fa-solid fa-angle-up"></i>
                </a>
            </li>
        </ul>
    </div>
    <model th:replace="~{modal.html::modal}"></model>
    <script src="./assets/js/script.js"></script>
    <script>
    	function handleSubmitEditPasssword(){
    		Swal.fire({
    			title: 'Bạn muốn thay đổi mật khẩu?',
    			icon: 'question',
    			showCancelButton: true,
    			confirmButtonColor: '#4ac35a',
    			cancelButtonColor: '#d33',
    			confirmButtonText: 'Đồng ý',
    			cancelButtonText: 'Hủy bỏ'
    		}).then((result) => {
    	  		if (result.isConfirmed) {
    	  			inputchangepw=document.querySelectorAll(".changepassword__info-input")
        			if(inputchangepw[1].value==""){
        				document.querySelector(".error-inputchangepw").innerText="Nhập mật khẩu mới!"
        			}else if(inputchangepw[1].value!=inputchangepw[2].value){
        				document.querySelector(".error-comfirmchangepw").innerText="Xác nhận không chính xác!"
        			}else{
    	    			document.querySelector(".changepassword-information").submit()  				
        			}
    	  		}
    		})   	
    	}
    	if(document.querySelector("#succeschangepassword")!=null){
  			Swal.fire({
	  			  position: 'center',
	  			  width:450,
	  			  icon: 'success',
	  			  title: 'Thành công',
	  			  text:'Đổi mật khẩu thành công!',
	  			  showConfirmButton: false,
	  			  timer: 1500
	  			})
    	}
    	if(document.querySelector("#errorchangepassword")!=null){
  			Swal.fire({
	  			  position: 'center',
	  			  width:450,
	  			  icon: 'error',
	  			  title: 'Thất bại',
	  			  text:'Mật khẩu cũ không chính xác!',
	  			  showConfirmButton: false,
	  			  timer: 1500
	  			})
    	}
    </script>
</body>
</html>